<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Meander Survey</title>
    <!-- Latest compiled and minified BootStrap 3.3.7 CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">

        <h2>Our Meandering Questions</h2>
        <hr>

        <h3><strong>About You</strong></h3>
        <h4>Name (Required)</h4>
        <input type="text" name="" id="name" class="form-control" required="" tabindex="1">

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" name="" id="photo" class="form-control" required="" tabindex="2">

        <hr>

        <h3><strong>Q 1</strong></h3>
        <h4>I'm Rich!</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q1" tabindex="3">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>

        <h3><strong>Q 2</strong></h3>
        <h4>Hostels are quite fine accommodations.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q2" tabindex="4">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>

        <h3><strong>Q 3</strong></h3>
        <h4>When I am in a new place I fully embrace it's culture.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q3" tabindex="5">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>

        <h3><strong>Q 4</strong></h3>
        <h4>I am a night owl and not an early riser.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q4" tabindex="6">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>

        <h3><strong>Q 5</strong></h3>
        <h4>I like to keep things spontaneous.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q5" tabindex="7">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>


        <h3><strong>Q 6</strong></h3>
        <h4>I stick to a tight itinerary.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q6" tabindex="8" <option value=""></option>
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>



        <h3><strong>Q 7</strong></h3>
        <h4>I like to take my time getting somewhere.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q7" tabindex="9">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>


        <h3><strong>Q 8</strong></h3>
        <h4>Foul odors don't make me hurl.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q8" tabindex="10">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>


        <h3><strong>Q 9</strong></h3>
        <h4>I like to try all the new foods that have been laid out before me.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q9" tabindex="11">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>


        <h3><strong>Q 10</strong></h3>
        <h4>I stick to as many free activities as possible.</h4>
        <div>
            <select data-placeholder="" class="chosen-select-no-single" id="q10" tabindex="12">
                     <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                  </select>
        </div>
        <br>
        <br>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary btn-lg" id="submit" tabindex="13"><i class="fa fa-check-circle" aria-hidden="true"></i>
         Submit</button>
    </div>
    <hr>

    <!-- Modal to dislay results after survey has been submitted -->
    <div id="modal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Your Meander Mate!</h4>
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <h2 id="meandererName"></h2>
                        <img id="meandererImg" src="" alt="">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p><a href="/api/meanderers">API Meanders List</a> | <a href="https://github.com/jMac029/MeanderMate">GitHub Repo</a></p>
        </div>
    </footer>

    <!-- Javascript Functionality-->
    <script type="text/javascript">
        let newMeanderer = {}
        $("#submit").on("click", function() {
            function validateForm() {
                var isValid = true;
                $('.form-control').each(function() {
                    if ($(this).val() === '')
                        isValid = false;
                })
                $('.chosen-select-no-single').each(function() {
                    if ($(this).val() === "")
                        isValid = false
                })
                return isValid;
            }
            if (validateForm() == true) {
                let surveyResults = [];
                for (var i = 1; i < 11; i++) {
                    surveyResults.push($("#q" + i).val());
                }
                newMeanderer = {
                    "name": $("#name").val().trim(),
                    "picture": $("#photo").val().trim(),
                    "survey": surveyResults
                }
                console.log(newMeanderer);
                $.post("/api/meanderers", newMeanderer, function(data) {
                    if (data) {
                        console.log("matched with:", data);
                        $("#meandererName").text(data.name);
                        $('#meandererImg').attr("src", data.photo);
                        $("#modal").modal('toggle');
                    } else {
                        //fail
                    }
                })
            } else {
                alert("Please fill out all fields before submitting!");
            }
        });
    </script>
</body>

</html>